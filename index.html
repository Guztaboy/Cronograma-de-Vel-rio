<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <title>Informativo de Velórios</title>
    <link rel="shortcut icon" href="passaro.svg" type="image/x-icon">
</head>
<body>
    <!-- cont full -->
    <div id="content">
        <h1>Informativo de Velórios</h1>

        <!-- table -->
        <table id="editableTable">
            <thead>
                <tr>
                    <th>Cemitério</th>
                    <th>Nome do Falecido</th>
                    <th>Data do Velório</th>
                    <th>Horário de início</th>
                    <th>Horário do Fim do Velório</th>
                    <th>Sala do Velório</th>
                    <th>Data & Horário de Sepultamento</th>
                    <th>Destino</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Araçá</td>
                    <td>MARTA SUELI NASCIMENTO</td>
                    <td>01/03/2025</td>
                    <td>09:00</td>
                    <td>13:00</td>
                    <td>SALA G</td>
                    <td>01/03/2025 às 13:00</td>
                    <td>CEMITÉRIO CONSOLAÇÃO</td>
                </tr>
                <tr>
                    <td>Araçá</td>
                    <td>ISRAEL PINTO FERREIRA</td>
                    <td>01/03/2025</td>
                    <td>09:30</td>
                    <td>11:30</td>
                    <td>SALA C</td>
                    <td>01/03/2025 às 11:30</td>
                    <td></td>
                </tr>
                <tr>
                    <td>Araçá</td>
                    <td>PIEDADE MONTEIRO DE AGUIAR</td>
                    <td>28/02/2025</td>
                    <td>07:00</td>
                    <td>11:00</td>
                    <td>SALA F</td>
                    <td>28/02/2025 às 13:00</td>
                    <td></td>
                </tr>
                <tr>
                    <td>Araçá</td>
                    <td>HELENA GONCALVES MIRANDA</td>
                    <td>28/02/2025</td>
                    <td>07:00</td>
                    <td>13:00</td>
                    <td>SALA E</td>
                    <td>28/02/2025 às 12:30</td>
                    <td></td>
                </tr>
                <tr>
                    <td>Araçá</td>
                    <td>HELENA GONCALVES MIRANDA</td>
                    <td>28/02/2025</td>
                    <td>07:00</td>
                    <td>13:00</td>
                    <td>SALA E</td>
                    <td>28/02/2025 às 12:30</td>
                    <td></td>
                </tr>
                <tr>
                    <td>Araçá</td>
                    <td>HELENA GONCALVES MIRANDA</td>
                    <td>28/02/2025</td>
                    <td>07:00</td>
                    <td>13:00</td>
                    <td>SALA E</td>
                    <td>28/02/2025 às 12:30</td>
                    <td></td>
                </tr>
                 <tr>
                    <td>Araçá</td>
                    <td>HELENA GONCALVES MIRANDA</td>
                    <td>28/02/2025</td>
                    <td>07:00</td>
                    <td>13:00</td>
                    <td>SALA E</td>
                    <td>28/02/2025 às 12:30</td>
                    <td></td>
                </tr>
            </tbody>
        </table>

        <!-- imgs -->
        <div class="logo-background">
            <img src="logocortel.svg" alt="Logo">
        </div>
        <div class="logo-background2">
            <img src="passaro.svg" alt="Logo">
        </div>
        <div class="logo-background3">
            <img src="prefeitura.svg" alt="">
        </div>
    </div>

    <!-- vídeo -->
    <div id="video-container">
        <video id="video" loop muted autoplay>
            <source src="video1.mp4" type="video/mp4">
            Seu navegador não suporta a execução do vídeo.
        </video>
    </div>

    <script>
        // edit da tabela
        const table = document.getElementById('editableTable');
        table.addEventListener('click', function(event) {
            const target = event.target;
            if (target.tagName === 'TD') {
                target.setAttribute('contenteditable', true);
                target.focus();
            }
        });

        // edit da tabela + autosave
        table.addEventListener('blur', function(event) {
            const target = event.target;
            if (target.tagName === 'TD') {
                target.removeAttribute('contenteditable');
            }
        }, true);
    </script>

    <script>
        const tempoExibicao = 60000; 
        let isEditing = false;

        function alternar() {
            if (isEditing) return; // se editando

            const content = document.getElementById('content');
            const videoContainer = document.getElementById('video-container');
            const video = document.getElementById('video');

            // exibe a pagina e oculta o video
            content.style.display = 'block';
            videoContainer.style.display = 'none';
            video.pause();

            // vice-versa
            setTimeout(() => {
                if (!isEditing) { // verifica
                    content.style.display = 'none';
                    videoContainer.style.display = 'block';
                    video.play();
                }
            }, tempoExibicao);
        }

        //  se alguma célula sendo editada
        table.addEventListener('focus', function(event) {
            if (event.target.tagName === 'TD') {
                isEditing = true;
            }
        }, true);

        table.addEventListener('blur', function(event) {
            if (event.target.tagName === 'TD') {
                isEditing = false;
            }
        }, true);

        // alternar
        alternar();
        setInterval(alternar, tempoExibicao * 2); 
    </script>
</body>
</html>